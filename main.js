!function(){"use strict";var e=document.querySelector(".profile__info-button"),t=(document.querySelector(".popup-opened"),document.querySelector(".form__fieldset")),n=document.querySelector(".form__input-name"),r=document.querySelector(".form__input-job"),o=(document.querySelector(".profile__info-name"),document.querySelector(".profile__info-text"),document.querySelector(".profile__button")),i=(document.querySelector(".overlay"),document.querySelector(".zoom-open"),document.querySelector(".popup_image"),document.querySelector(".formcard__fieldset")),u=document.querySelector(".popup__avatar-form"),c=document.querySelector(".profile__image-edit");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var f=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(n.querySelectorAll("input"))},(t=[{key:"_checkInputLength",value:function(e,t){return 0===e.value.trim().length?(t.textContent="Preencha este campo.",!1):e.value.trim().length<2?(t.textContent="O campo deve ter pelo menos 2 caracteres.",!1):(t.textContent="",!0)}},{key:"_checkInputValidity",value:function(e,t){return e.validity.valid?(t.textContent="",!0):(t.textContent=e.validationMessage,!1)}},{key:"_buttonState",value:function(){var e=this._formElement.querySelector(this._config.submitButtonSelector),t=this._formElement.querySelector(this._config.inputSelectorOne),n=this._formElement.querySelector(this._config.inputSelectorTwo),r=this._formElement.querySelector(this._config.errorClassOne),o=this._formElement.querySelector(this._config.errorClassTwo),i=!0,u=!0;t&&r&&(i=this._checkInputLength(t,r)),n&&o&&(u=this._checkInputLength(n,o)&&this._checkInputValidity(n,o)),e.disabled=!(i&&u)}},{key:"_clearErrorMessages",value:function(){var e=this._formElement.querySelector(this._config.errorClassOne),t=this._formElement.querySelector(this._config.errorClassTwo);e.textContent="",t.textContent=""}},{key:"_handleInputChange",value:function(){this._buttonState()}},{key:"_setEventListeners",value:function(){var e=this._formElement.querySelector(this._config.inputSelectorOne),t=this._formElement.querySelector(this._config.inputSelectorTwo);e&&e.addEventListener("input",this._handleInputChange()),t&&t.addEventListener("input",this._handleInputChange())}},{key:"enableValidation",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._handleInputChange()}))})),this._setEventListeners(),this._buttonState()}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var d=function(){return e=function e(t,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this.owner=t.owner._id,this._cardId=t._id,this._data=t,this._dataTemplate=n,this._handleImagePopup=r,this._handleCardDelete=o,this._handleAddLike=i,this._handleRemoveLike=u},(t=[{key:"_getTemplate",value:function(){return document.querySelector("#template").content.querySelector(".elements__card").cloneNode(!0)}},{key:"removeElement",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._trash(),this._element.querySelector(".elements__card-image").addEventListener("click",(function(){e._handleImagePopup(e._link,e._name)})),this._element.querySelector(".elements__like-button").addEventListener("click",(function(){e._likedButton()}))}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".elements__card-name").textContent=this._name,this._element.querySelector(".elements__like-counter").textContent=this._likes.length;var e=this._element.querySelector(".elements__card-image");return e.setAttribute("src",this._link),e.setAttribute("alt",this._name),"40bf3b12a3d0fe74bfbe12d1"===this.owner&&this._element.querySelector(".elements__delete-button").classList.add("elements__delete-button-hidden"),this.isLiked()&&this._element.querySelector(".elements__like-button").classList.add("elements__like-button_press"),this._element}},{key:"isLiked",value:function(){return this._likes.find((function(e){return"40bf3b12a3d0fe74bfbe12d1"===e._id}))}},{key:"_likedButton",value:function(){var e=this,t=this._element.querySelector(".elements__like-button"),n=this._element.querySelector(".elements__like-counter");this.isLiked()?this._handleRemoveLike(this._cardId).then((function(r){t.classList.remove("elements__like-button_press"),n.textContent=r.likes.length,e._likes=r.likes})):this._handleAddLike(this._cardId).then((function(r){t.classList.add("elements__like-button_press"),n.textContent=r.likes.length,e._likes=r.likes}))}},{key:"_trash",value:function(){var e=this;this._element.querySelector(".elements__delete-button").addEventListener("click",(function(){e._handleCardDelete()}))}}])&&y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var _=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._list=document.querySelector(n)},(t=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e.addItem(t)}))}},{key:"addElement",value:function(e){this._list.prepend(e)}},{key:"addItem",value:function(e){var t=this._renderer(e);this._list.append(t)}}])&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var w=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)},(t=[{key:"open",value:function(){this._popup.classList.add("popup-opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup-opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&Array.from(document.querySelectorAll(".popup")).forEach((function(e){e.classList.remove("popup-opened")}))}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){return e.close()})),document.addEventListener("keydown",this._handleEscClose),this._popup.firstElementChild.addEventListener("click",(function(){e.close()}))}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}function P(e,t,n){return t=q(t),function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var I=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=P(this,t,[r]))._popup=document.querySelector(r),o._imageSelector=o._popup.querySelector(e),o._titleSelector=o._popup.querySelector(n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){L(q(t.prototype),"close",this).call(this)}},{key:"open",value:function(e,n){this._imageSelector.src=e,this._imageSelector.alt=n,this._titleSelector.textContent=n,L(q(t.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){return e.close()})),this._popup.firstElementChild.addEventListener("click",(function(){e.close()}))}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(w);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}function B(e,t,n){return t=z(t),function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,n||[],z(e).constructor):t.apply(e,n))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},D.apply(this,arguments)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var N=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=B(this,t,[e]))._submitCallBack=n,o._formElement=document.querySelector(r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,(r=[{key:"_getInputValues",value:function(){var e=Array.from(this._formElement.querySelectorAll("input")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"_loading",value:function(e){e&&(this._submitCallBack.textContent="Salvando...")}},{key:"setEventListeners",value:function(){var e=this;D(z(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e._submitCallBack(n),e._loading(!0),e.close(),e.reset()}))}},{key:"close",value:function(){D(z(t.prototype),"close",this).call(this)}},{key:"reset",value:function(){this._formElement.reset()}}])&&U(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(w);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function M(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}function F(e,t,n){return t=Q(t),function(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G()?Reflect.construct(t,n||[],Q(e).constructor):t.apply(e,n))}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},K.apply(this,arguments)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}var X=function(e){function t(e){var n,r=e.popupSelector,o=e.submitCallback;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=F(this,t,[r]))._submitCallback=o,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e){this._card=e,K(Q(t.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;K(Q(t.prototype),"setEventListeners",this).call(this),document.querySelector(".popup-confirm__btn").addEventListener("click",(function(t){t.preventDefault(),e._submitCallback(e._card).then((function(){e.close()}))}))}}])&&H(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(w);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function $(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}var ee=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n),this._avatarElement=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e,t,n){this._nameElement.textContent=e,this._jobElement.textContent=t,this._avatarElement.src=n}}])&&Z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function re(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}var oe=new(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers},(t=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editUserInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return console.log(this._baseUrl),fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLikes",value:function(e){return fetch("https://around.nomoreparties.co/v1/web-ptbr-cohort-10/cards/likes/".concat(e),{method:"PUT",headers:{authorization:"cc445779-d6db-4667-8701-d2576b6346ad","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeLike",value:function(e){return fetch("https://around.nomoreparties.co/v1/web-ptbr-cohort-10/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"cc445779-d6db-4667-8701-d2576b6346ad","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeCard",value:function(e){return fetch("https://around.nomoreparties.co/v1/web-ptbr-cohort-10/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"cc445779-d6db-4667-8701-d2576b6346ad","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editAvatar",value:function(e){var t=e.avatar;return fetch("https://around.nomoreparties.co/v1/web-ptbr-cohort-10/users/me/avatar",{method:"PATCH",headers:{authorization:"cc445779-d6db-4667-8701-d2576b6346ad","Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&ne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web-ptbr-cohort-10",headers:{authorization:"cc445779-d6db-4667-8701-d2576b6346ad","Content-Type":"application/json"}});new f({inputSelectorOne:".form__input-name",inputSelectorTwo:".form__input-job",submitButtonSelector:".form__submit",errorClassOne:".form__input-name-error",errorClassTwo:".form__input-job-error"},t).enableValidation(),new f({inputSelectorOne:".formcard__input-title",inputSelectorTwo:".formcard__input-link",submitButtonSelector:".formcard__submit",errorClassOne:".formcard__input-title-error",errorClassTwo:".formcard__input-link-error"},i).enableValidation(),new f({inputSelectorTwo:".popup__avatar-input",submitButtonSelector:".popup__avatar-submit",errorClassTwo:".popup__avatar-input-error"},u).enableValidation();var ie=new X({popupSelector:"#popup-confirm",submitCallback:function(e){return oe.removeCard(e._cardId).then((function(){e.removeElement()})).catch((function(e){console.log(e)}))}});ie.setEventListeners();var ue=new ee(".profile__info-name",".profile__info-text",".profile__image");oe.getUserInfo().then((function(e){var t=e.name,n=e.about,r=e.avatar;ue.setUserInfo(t,n,r)})).catch((function(e){console.log(e)}));var ce=new N("#popup-user",(function(e){var t=e.name,n=e.about;oe.editUserInfo(t,n);var r=ue.getUserInfo().avatar;ue.setUserInfo(t,n,r)}),".form__fieldset");e.addEventListener("click",(function(){var e=new ee(".profile__info-name",".profile__info-text").getUserInfo(),t=e.name,o=e.job;n.value=t,r.value=o,ce.open()})),ce.setEventListeners();var ae=new N("#popup-avatar",(function(e){var t=e.image;oe.editAvatar({avatar:document.querySelector(".popup__avatar-input").value});var n=ue.getUserInfo(),r=n.name,o=n.about;ue.setUserInfo(r,o,t)}),".popup__avatar-form");ae.setEventListeners(),c.addEventListener("click",(function(){ae.open()})),oe.getInitialCards().then((function(e){new _({items:e,renderer:function(e){var t=new d(e,document.querySelector("#template"),(function(e,t){se.open(e,t),se.setEventListeners()}),(function(){ie.open(t)}),oe.addLikes,oe.removeLike);return t.generateCard()}},".elements").renderItems()})).catch((function(e){console.log(e)}));var le=new N(".popup_add",(function(){oe.addCard({name:document.querySelector(".formcard__input-title").value,link:document.querySelector(".formcard__input-link").value}).then((function(e){var t;document.querySelector(".elements__card").prepend((t=new d(e,"#template",(function(e,t){se.open(e,t),se.setEventListeners()}),(function(){ie.open(t)}),oe.addLikes.bind(oe),oe.removeLike.bind(oe))).generateCard())}))}),".formcard__fieldset");le.setEventListeners(),o.addEventListener("click",(function(){le.reset(),le.open()}));var se=new I(".popup__zoom-image",".popup__zoom-text",".popup_image")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTZixtQkFDWCxJQUNBLFdBQ0VMLEdBQVlZLEtBQUtoRCxFQUNuQixHQUNFVyxHQUFJOEMsU0FBU08sS0FBS3JELElBQ2xCQSxHQUFJK0MsV0FBV00sS0FBS3JELE1BRVZnRCxlQTBDVixHQUNKLEdBQ0UsdUJBR0ZFLEdBQVlwQixvQkFFWnBMLEVBQVd3QyxpQkFBaUIsU0FBUyxXQUNuQ2dLLEdBQVlqRSxRQUNaaUUsR0FBWWIsTUFDZCxJQUlBLElBQU1RLEdBQVcsSUFBSXZGLEVBQ25CLHFCQUNDLG9CQUNDLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L2NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9zZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9JTklUSUFMIENBUkRTLy9cblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIHRpdGxlOiBcIlZhbGUgZGUgWW9zZW1pdGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfeW9zZW1pdGUuanBnXCJcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkxhZ28gTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2xha2UtbG91aXNlLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJNb250YW5oYXMgQ2FyZWNhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9iYWxkLW1vdW50YWlucy5qcGdcIlxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9sYXRlbWFyLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJQYXJxdWUgTmFjaW9uYWwgZGEgVmFub2lzZSBcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfdmFub2lzZS5qcGdcIlxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGFnby5qcGdcIlxuICB9XG5dO1xuXG4vL0NvbnN0YW50ZXMvL1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGZvcm1PcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLW9wZW5lZCcpO1xuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2ZpZWxkc2V0Jyk7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0LW5hbWUnKTtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dC1qb2InKTtcbmV4cG9ydCBjb25zdCBuYW1lUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvLW5hbWUnKTtcbmV4cG9ydCBjb25zdCBqb2JQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2luZm8tdGV4dCcpO1xuZXhwb3J0IGNvbnN0IGNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5leHBvcnQgY29uc3Qgem9vbU9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuem9vbS1vcGVuJyk7XG5leHBvcnQgY29uc3Qgem9vbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9pbWFnZScpO1xuZXhwb3J0IGNvbnN0IGZvcm1DYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1jYXJkX19maWVsZHNldCcpO1xuZXhwb3J0IGNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2F2YXRhci1mb3JtJyk7XG5leHBvcnQgY29uc3Qgb3BlbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UtZWRpdCcpOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0TGVuZ3RoKGlucHV0LCBlcnJvckVsZW1lbnQpIHtcbiAgICBpZiAoaW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJQcmVlbmNoYSBlc3RlIGNhbXBvLlwiO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA8IDIpIHtcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiTyBjYW1wbyBkZXZlIHRlciBwZWxvIG1lbm9zIDIgY2FyYWN0ZXJlcy5cIjtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIGVycm9yRWxlbWVudCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgX2J1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICBjb25zdCBpbnB1dE9uZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3JPbmUpO1xuICAgIGNvbnN0IGlucHV0VHdvID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvclR3byk7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50T25lID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuZXJyb3JDbGFzc09uZSk7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50VHdvID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuZXJyb3JDbGFzc1R3byk7XG5cbiAgICBsZXQgaXNJbnB1dE9uZVZhbGlkID0gdHJ1ZTtcbiAgICBsZXQgaXNJbnB1dFR3b1ZhbGlkID0gdHJ1ZTtcblxuICAgIGlmIChpbnB1dE9uZSAmJiBlcnJvckVsZW1lbnRPbmUpIHtcbiAgICAgIGlzSW5wdXRPbmVWYWxpZCA9IHRoaXMuX2NoZWNrSW5wdXRMZW5ndGgoaW5wdXRPbmUsIGVycm9yRWxlbWVudE9uZSk7XG4gICAgfVxuXG4gICAgaWYgKGlucHV0VHdvICYmIGVycm9yRWxlbWVudFR3bykge1xuICAgICAgaXNJbnB1dFR3b1ZhbGlkID0gdGhpcy5fY2hlY2tJbnB1dExlbmd0aChpbnB1dFR3bywgZXJyb3JFbGVtZW50VHdvKSAmJiB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRUd28sIGVycm9yRWxlbWVudFR3byk7XG4gICAgfVxuXG4gICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gIShpc0lucHV0T25lVmFsaWQgJiYgaXNJbnB1dFR3b1ZhbGlkKTtcbiAgfVxuXG4gIF9jbGVhckVycm9yTWVzc2FnZXMoKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50T25lID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuZXJyb3JDbGFzc09uZSk7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50VHdvID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuZXJyb3JDbGFzc1R3byk7XG5cbiAgICBlcnJvckVsZW1lbnRPbmUudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yRWxlbWVudFR3by50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfaGFuZGxlSW5wdXRDaGFuZ2UoKSB7XG4gICAgdGhpcy5fYnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBpbnB1dE9uZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3JPbmUpO1xuICAgIGNvbnN0IGlucHV0VHdvID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvclR3byk7XG4gICAgaW5wdXRPbmUgPyBpbnB1dE9uZS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5faGFuZGxlSW5wdXRDaGFuZ2UoKSkgOiBudWxsO1xuICAgIGlucHV0VHdvID8gaW5wdXRUd28uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuX2hhbmRsZUlucHV0Q2hhbmdlKCkpIDogbnVsbDtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDaGFuZ2UoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fYnV0dG9uU3RhdGUoKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhQ2FyZCxcbiAgICBkYXRhVGVtcGxhdGUsXG4gICAgaGFuZGxlSW1hZ2VQb3B1cCxcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxuICAgIGhhbmRsZUFkZExpa2UsXG4gICAgaGFuZGxlUmVtb3ZlTGlrZSxcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGFDYXJkLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGFDYXJkLmxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhQ2FyZC5saWtlcztcbiAgICB0aGlzLm93bmVyID0gZGF0YUNhcmQub3duZXIuX2lkO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGFDYXJkLl9pZDtcbiAgICB0aGlzLl9kYXRhID0gZGF0YUNhcmQ7XG5cbiAgICB0aGlzLl9kYXRhVGVtcGxhdGUgPSBkYXRhVGVtcGxhdGU7XG5cbiAgICB0aGlzLl9oYW5kbGVJbWFnZVBvcHVwID0gaGFuZGxlSW1hZ2VQb3B1cDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgICB0aGlzLl9oYW5kbGVBZGRMaWtlID0gaGFuZGxlQWRkTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlID0gaGFuZGxlUmVtb3ZlTGlrZTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVtcGxhdGVcIikuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICByZW1vdmVFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICB0aGlzLl90cmFzaCgpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VQb3B1cCh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VkQnV0dG9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgY3VycmVudENhcmROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkLW5hbWVcIik7XG4gICAgY3VycmVudENhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2UtY291bnRlclwiKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKTtcbiAgICBpbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2xpbmspO1xuICAgIGltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XG5cbiAgICBjb25zdCByZW1vdmUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBteUlkID0gXCI0MGJmM2IxMmEzZDBmZTc0YmZiZTEyZDFcIjtcbiAgICAgIGlmICh0aGlzLm93bmVyID09PSBteUlkKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fZGVsZXRlLWJ1dHRvblwiKS5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2RlbGV0ZS1idXR0b24taGlkZGVuXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJlbW92ZSgpO1xuXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWJ1dHRvblwiKTtcbiAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19saWtlLWJ1dHRvbl9wcmVzc1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgY29uc3QgbXlJZCA9IFwiNDBiZjNiMTJhM2QwZmU3NGJmYmUxMmQxXCI7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLmZpbmQoKHJlcykgPT4gcmVzLl9pZCA9PT0gbXlJZCk7XG4gIH1cblxuICBfbGlrZWRCdXR0b24oKSB7XG4gICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWJ1dHRvblwiKTtcbiAgICAgIGNvbnN0IGxpa2VDb3VudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1jb3VudGVyXCIpO1xuXG4gICAgICBpZiAoIXRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2UodGhpcy5fY2FyZElkKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fbGlrZS1idXR0b25fcHJlc3NcIik7XG4gICAgICAgICAgbGlrZUNvdW50LnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlcztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKHRoaXMuX2NhcmRJZCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX3ByZXNzXCIpO1xuICAgICAgICAgIGxpa2VDb3VudC50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gICAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXM7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdHJhc2goKSB7XG4gICAgICBjb25zdCB0cmFzaENsaWNrID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19kZWxldGUtYnV0dG9uXCIpO1xuICAgICAgdHJhc2hDbGljay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKCk7XG4gICAgICB9KVxuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IgKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCl7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLmFkZEl0ZW0oaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkRWxlbWVudChlbGVtZW50KXtcclxuICAgIHRoaXMuX2xpc3QucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZGF0YSl7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZGF0YSk7XHJcbiAgICB0aGlzLl9saXN0LmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCl7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwLW9wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpe1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cC1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICBjb25zdCBwb3B1cCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKSk7XG4gICAgICBwb3B1cC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLW9wZW5lZFwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCl7XG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcblxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcblxuICAgIHRoaXMuX3BvcHVwLmZpcnN0RWxlbWVudENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9KTtcbiAgfVxuICB9IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihpbWFnZVNlbGVjdG9yLCB0aXRsZVNlbGVjdG9yLCBwb3B1cFNlbGVjdG9yKXtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VTZWxlY3RvciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoaW1hZ2VTZWxlY3Rvcik7XG4gICAgdGhpcy5fdGl0bGVTZWxlY3RvciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XG4gIH1cblxuICBjbG9zZSgpe1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBvcGVuKGltYWdlLCBuYW1lKXtcbiAgICB0aGlzLl9pbWFnZVNlbGVjdG9yLnNyYyA9IGltYWdlO1xuICAgIHRoaXMuX2ltYWdlU2VsZWN0b3IuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl90aXRsZVNlbGVjdG9yLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpe1xuICAgIGNvbnN0IGNsb3NlWm9vbSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuICAgIGNsb3NlWm9vbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB0aGlzLl9wb3B1cC5maXJzdEVsZW1lbnRDaGlsZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG4gICAgICB0aGlzLmNsb3NlKClcblxuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Q2FsbEJhY2ssIHBvcHVwRm9ybSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdENhbGxCYWNrID0gc3VibWl0Q2FsbEJhY2s7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwRm9ybSk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpO1xuXG4gICAgY29uc3QgdmFsdWVzID0ge307XG5cbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBfbG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZihpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdENhbGxCYWNrLnRleHRDb250ZW50ID0gXCJTYWx2YW5kby4uLlwiO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgY29uc3QgdmFsb3JlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9zdWJtaXRDYWxsQmFjayh2YWxvcmVzKTtcbiAgICAgIHRoaXMuX2xvYWRpbmcodHJ1ZSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3Rvciwgc3VibWl0Q2FsbGJhY2t9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRDYWxsYmFjaztcbiAgfVxuXG4gIG9wZW4oY2FyZCl7XG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGNvbnN0IGRlbGV0ZUNvbmZpcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWNvbmZpcm1fX2J0blwiKTtcblxuICAgIGRlbGV0ZUNvbmZpcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fY2FyZCkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBKb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihKb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgam9iLCBpbWFnZSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gaW1hZ2U7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgIH1cblxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICBpZiAocmVzLm9rKXtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgIGlmIChyZXMub2spe1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZWRpdFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICAgIH0pLFxuICAgICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZENhcmQoe25hbWUsIGxpbmt9KSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLl9iYXNlVXJsKVxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICB9KSxcbiAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRMaWtlcyhjYXJkSWQpIHtcbiAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItcHRici1jb2hvcnQtMTAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImNjNDQ1Nzc5LWQ2ZGItNDY2Ny04NzAxLWQyNTc2YjYzNDZhZFwiLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItcHRici1jb2hvcnQtMTAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImNjNDQ1Nzc5LWQ2ZGItNDY2Ny04NzAxLWQyNTc2YjYzNDZhZFwiLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItcHRici1jb2hvcnQtMTAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImNjNDQ1Nzc5LWQ2ZGItNDY2Ny04NzAxLWQyNTc2YjYzNDZhZFwiLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZWRpdEF2YXRhcih7YXZhdGFyfSkge1xuICAgICAgcmV0dXJuIGZldGNoKGBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1wdGJyLWNvaG9ydC0xMC91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCJjYzQ0NTc3OS1kNmRiLTQ2NjctODcwMS1kMjU3NmI2MzQ2YWRcIixcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogYXZhdGFyIH0pLFxuICAgICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBwcm9maWxlQnV0dG9uLFxuICBmb3JtRWxlbWVudCxcbiAgbmFtZUlucHV0LFxuICBqb2JJbnB1dCxcbiAgY2FyZEJ1dHRvbixcbiAgZm9ybUNhcmQsXG4gIGZvcm1BdmF0YXIsXG4gIG9wZW5FZGl0QXZhdGFyLFxufSBmcm9tIFwiLi9zY3JpcHQvdXRpbHMuanNcIlxuXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuL3NjcmlwdC9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4vc2NyaXB0L2NhcmQuanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4vc2NyaXB0L3NlY3Rpb24uanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuL3NjcmlwdC9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi9zY3JpcHQvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tICcuL3NjcmlwdC9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gJy4vc2NyaXB0L1VzZXJJbmZvLmpzJztcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4vc2NyaXB0L0FwaS5qcyc7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViLXB0YnItY29ob3J0LTEwXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImNjNDQ1Nzc5LWQ2ZGItNDY2Ny04NzAxLWQyNTc2YjYzNDZhZFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pXG5cbi8vIFZhbGlkYcOnw6NvIGRlIGZvcm11bMOhcmlvcyAvL1xuXG5jb25zdCBjb25maWdVc2VyVmFsaWRhdGUgPSB7IGlucHV0U2VsZWN0b3JPbmU6IFwiLmZvcm1fX2lucHV0LW5hbWVcIiwgaW5wdXRTZWxlY3RvclR3bzogXCIuZm9ybV9faW5wdXQtam9iXCIsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIiwgZXJyb3JDbGFzc09uZTogXCIuZm9ybV9faW5wdXQtbmFtZS1lcnJvclwiLCBlcnJvckNsYXNzVHdvOiBcIi5mb3JtX19pbnB1dC1qb2ItZXJyb3JcIiB9XG5jb25zdCBjb25maWdGb3JtVmFsaWRhZGUgPSB7IGlucHV0U2VsZWN0b3JPbmU6IFwiLmZvcm1jYXJkX19pbnB1dC10aXRsZVwiLCBpbnB1dFNlbGVjdG9yVHdvOiBcIi5mb3JtY2FyZF9faW5wdXQtbGlua1wiLCBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybWNhcmRfX3N1Ym1pdFwiLCBlcnJvckNsYXNzT25lOiBcIi5mb3JtY2FyZF9faW5wdXQtdGl0bGUtZXJyb3JcIiwgZXJyb3JDbGFzc1R3bzogXCIuZm9ybWNhcmRfX2lucHV0LWxpbmstZXJyb3JcIiB9XG5jb25zdCBjb25maWdBdmF0YXJWYWxpZGFkZSA9IHsgaW5wdXRTZWxlY3RvclR3bzogXCIucG9wdXBfX2F2YXRhci1pbnB1dFwiLCBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2F2YXRhci1zdWJtaXRcIiwgZXJyb3JDbGFzc1R3bzogXCIucG9wdXBfX2F2YXRhci1pbnB1dC1lcnJvclwiIH1cblxubmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnVXNlclZhbGlkYXRlLCBmb3JtRWxlbWVudCkuZW5hYmxlVmFsaWRhdGlvbigpO1xubmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnRm9ybVZhbGlkYWRlLCBmb3JtQ2FyZCkuZW5hYmxlVmFsaWRhdGlvbigpO1xubmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnQXZhdGFyVmFsaWRhZGUsIGZvcm1BdmF0YXIpLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuXG4vLyBDb25maXJtYcOnw6NvIGRlIGV4Y2x1c8OjbyBkbyBjYXJkIC8vXG5cbmNvbnN0IHBvcHVwRGVsZXRlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI3BvcHVwLWNvbmZpcm1cIixcbiAgc3VibWl0Q2FsbGJhY2s6IChjYXJkKSA9PiB7XG4gIHJldHVybiBhcGlcbiAgICAgICAgICAucmVtb3ZlQ2FyZChjYXJkLl9jYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnJlbW92ZUVsZW1lbnQoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cbn0pO1xuXG4gIHBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEluc3TDom5jaWEgZGUgdXN1w6FyaW8gLy9cblxuY29uc3QgaW5mb1VzZXIgPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9faW5mby1uYW1lXCIsIFwiLnByb2ZpbGVfX2luZm8tdGV4dFwiLCBcIi5wcm9maWxlX19pbWFnZVwiICk7XG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigoe25hbWUsIGFib3V0LCBhdmF0YXJ9KSA9PiB7XG4gICAgaW5mb1VzZXIuc2V0VXNlckluZm8obmFtZSwgYWJvdXQsIGF2YXRhcik7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmNvbnN0IHBvcHVwSW5mb1VzZXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC11c2VyXCIsICh7bmFtZSwgYWJvdXR9KSA9PiB7XG4gIGFwaS5lZGl0VXNlckluZm8obmFtZSwgYWJvdXQpO1xuICBjb25zdCB7IGF2YXRhciB9ID0gaW5mb1VzZXIuZ2V0VXNlckluZm8oKTtcbiAgaW5mb1VzZXIuc2V0VXNlckluZm8obmFtZSwgYWJvdXQsIGF2YXRhcik7XG59LFxuICBcIi5mb3JtX19maWVsZHNldFwiXG4pO1xuXG5wcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cbiAgY29uc3QgaW5mb1VzZXIgPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9faW5mby1uYW1lXCIsIFwiLnByb2ZpbGVfX2luZm8tdGV4dFwiKTtcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IGluZm9Vc2VyLmdldFVzZXJJbmZvKCk7XG5cbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSBqb2I7XG5cbiAgcG9wdXBJbmZvVXNlci5vcGVuKCk7XG59KVxuXG5wb3B1cEluZm9Vc2VyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEVkaXQgQXZhdGFyIC8vXG5cbmNvbnN0IGF2YXRhckVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1hdmF0YXJcIiwgKHtpbWFnZX0pID0+IHtcbiAgYXBpLmVkaXRBdmF0YXIoe1xuICAgIGF2YXRhcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYXZhdGFyLWlucHV0XCIpLnZhbHVlLFxuICB9KTtcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gaW5mb1VzZXIuZ2V0VXNlckluZm8oKTtcbiAgaW5mb1VzZXIuc2V0VXNlckluZm8obmFtZSwgYWJvdXQsIGltYWdlKTtcbn0sXG4gIFwiLnBvcHVwX19hdmF0YXItZm9ybVwiXG4pO1xuXG5hdmF0YXJFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbm9wZW5FZGl0QXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGF2YXRhckVkaXQub3BlbigpO1xufSlcblxuXG4vLyBHZXJhZG9yIGRlIGNhcmRzIC8vXG5cbmNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgaXRlbSxcbiAgICBcIiN0ZW1wbGF0ZVwiLFxuICAgIChpbWFnZSwgdGl0bGUpID0+IHtcbiAgICBwb3B1cEltZy5vcGVuKGltYWdlLCB0aXRsZSk7XG4gICAgcG9wdXBJbWcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSxcbiAgKCkgPT4ge1xuICAgIHBvcHVwRGVsZXRlLm9wZW4oY2FyZCk7XG4gIH0sXG4gICAgYXBpLmFkZExpa2VzLmJpbmQoYXBpKSxcbiAgICBhcGkucmVtb3ZlTGlrZS5iaW5kKGFwaSksXG4gICk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChpbml0aWFsQ2FyZHMpID0+IHtcbiAgICBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24gKHtcbiAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RlbXBsYXRlXCIpLCAoaW1hZ2UsIHRpdGxlKSA9PiB7XG4gICAgICAgIHBvcHVwSW1nLm9wZW4oaW1hZ2UsIHRpdGxlKTtcbiAgICAgICAgcG9wdXBJbWcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIH0sXG4gICAoKSA9PiB7XG4gICAgcG9wdXBEZWxldGUub3BlbihjYXJkKTtcbiAgfSxcbiAgICAgIGFwaS5hZGRMaWtlcyxcbiAgICAgIGFwaS5yZW1vdmVMaWtlLCk7XG5cbiAgICAgIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgfSxcbiAgICB9LCBcIi5lbGVtZW50c1wiKTtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KSk7XG5cbi8vIEZ1bsOnw6NvIHBhcmEgY3JpYXIgbm92b3MgY2FyZHMgLy9cblxuLy8gSW5zdMOibmNpYSBwYXJhIGFkaWNpb25hciBub3ZvcyBDYXJkcyAvL1xuXG5jb25zdCBmb3JtQ2FyZEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2FkZFwiLCAoKSA9PiB7XG4gIGFwaVxuICAgIC5hZGRDYXJkKHtcbiAgICAgIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybWNhcmRfX2lucHV0LXRpdGxlXCIpLnZhbHVlLFxuICAgICAgbGluazogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtY2FyZF9faW5wdXQtbGlua1wiKS52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGRvY3VtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmRcIilcbiAgICAgICAgICAucHJlcGVuZChjcmVhdGVOZXdDYXJkKHJlc3VsdCkpO1xuICAgIH0pXG59LFxuICBcIi5mb3JtY2FyZF9fZmllbGRzZXRcIlxuKTtcblxuZm9ybUNhcmRBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtQ2FyZEFkZC5yZXNldCgpO1xuICBmb3JtQ2FyZEFkZC5vcGVuKCk7XG59KTtcblxuLy8gWm9vbSBpbWFnZW5zIC8vXG5cbmNvbnN0IHBvcHVwSW1nID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICBcIi5wb3B1cF9fem9vbS1pbWFnZVwiLFxuICAgXCIucG9wdXBfX3pvb20tdGV4dFwiLFxuICAgIFwiLnBvcHVwX2ltYWdlXCIpO1xuXG4iXSwibmFtZXMiOlsicHJvZmlsZUJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvcm1FbGVtZW50IiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjYXJkQnV0dG9uIiwiZm9ybUNhcmQiLCJmb3JtQXZhdGFyIiwib3BlbkVkaXRBdmF0YXIiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImtleSIsInZhbHVlIiwiaW5wdXQiLCJlcnJvckVsZW1lbnQiLCJ0cmltIiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0T25lIiwiaW5wdXRTZWxlY3Rvck9uZSIsImlucHV0VHdvIiwiaW5wdXRTZWxlY3RvclR3byIsImVycm9yRWxlbWVudE9uZSIsImVycm9yQ2xhc3NPbmUiLCJlcnJvckVsZW1lbnRUd28iLCJlcnJvckNsYXNzVHdvIiwiaXNJbnB1dE9uZVZhbGlkIiwiaXNJbnB1dFR3b1ZhbGlkIiwiX2NoZWNrSW5wdXRMZW5ndGgiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZGlzYWJsZWQiLCJfYnV0dG9uU3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUlucHV0Q2hhbmdlIiwiX3RoaXMiLCJmb3JFYWNoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsImRhdGFDYXJkIiwiZGF0YVRlbXBsYXRlIiwiaGFuZGxlSW1hZ2VQb3B1cCIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwib3duZXIiLCJfaWQiLCJfY2FyZElkIiwiX2RhdGEiLCJfZGF0YVRlbXBsYXRlIiwiX2hhbmRsZUltYWdlUG9wdXAiLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVBZGRMaWtlIiwiX2hhbmRsZVJlbW92ZUxpa2UiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfdHJhc2giLCJfbGlrZWRCdXR0b24iLCJfZ2V0VGVtcGxhdGUiLCJpbWFnZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0xpa2VkIiwiZmluZCIsInJlcyIsIl90aGlzMyIsImxpa2VCdXR0b24iLCJsaWtlQ291bnQiLCJ0aGVuIiwiX3RoaXM0IiwiU2VjdGlvbiIsIl9yZWYiLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfbGlzdCIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJkYXRhIiwiYXBwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsImltYWdlU2VsZWN0b3IiLCJ0aXRsZVNlbGVjdG9yIiwiX2NhbGxTdXBlciIsIl9pbWFnZVNlbGVjdG9yIiwiX3RpdGxlU2VsZWN0b3IiLCJfaW5oZXJpdHMiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FsbCIsImltYWdlIiwic3JjIiwiYWx0IiwiX3RoaXMyIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdENhbGxCYWNrIiwicG9wdXBGb3JtIiwiX3N1Ym1pdENhbGxCYWNrIiwiaW5wdXRzIiwidmFsdWVzIiwiaXNMb2FkaW5nIiwicHJldmVudERlZmF1bHQiLCJ2YWxvcmVzIiwiX2dldElucHV0VmFsdWVzIiwiX2xvYWRpbmciLCJyZXNldCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsInN1Ym1pdENhbGxiYWNrIiwiX3N1Ym1pdENhbGxiYWNrIiwiY2FyZCIsIl9jYXJkIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJKb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImpvYiIsImF2YXRhciIsImFwaSIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsImNvbmNhdCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImxvZyIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJfcmVmMiIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cERlbGV0ZSIsInJlbW92ZUNhcmQiLCJyZW1vdmVFbGVtZW50IiwiY2F0Y2giLCJlcnIiLCJzZXRFdmVudExpc3RlbmVycyIsImluZm9Vc2VyIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwSW5mb1VzZXIiLCJlZGl0VXNlckluZm8iLCJfaW5mb1VzZXIkZ2V0VXNlckluZm8yIiwib3BlbiIsImF2YXRhckVkaXQiLCJfcmVmMyIsImVkaXRBdmF0YXIiLCJfaW5mb1VzZXIkZ2V0VXNlckluZm8zIiwiZ2V0SW5pdGlhbENhcmRzIiwiaW5pdGlhbENhcmRzIiwidGl0bGUiLCJwb3B1cEltZyIsImFkZExpa2VzIiwicmVtb3ZlTGlrZSIsImdlbmVyYXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwiZm9ybUNhcmRBZGQiLCJhZGRDYXJkIiwicmVzdWx0IiwiYmluZCJdLCJzb3VyY2VSb290IjoiIn0=